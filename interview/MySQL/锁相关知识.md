# 锁相关知道

``` wiki
理想的方式，就是精准锁写，在必需上锁的时候，只锁定自己要修改的数据，减少发生冲突的可能性。（也是优化的主要目录）
```



## 共享锁(读锁）

``` wiki
多个客户在同一时刻可以同时读取同一资源，而互不干扰
```



## 排他锁 (写锁）

``` wiki
一个写锁会阻塞其它的写锁和读锁
```

### 锁的类型

``` wiki
加锁也是需要成本的。要管理锁，检查锁。这些都是要花费系统资源的，并且不会对业务产生有意义的影响。
```



- 表锁

  ``` wiki
  1. 管理成本最小
  2. 写锁比读锁有更好的优先级
  3. 一般在服务层实现，忽略存储引擎层的表锁
  ```

  

- 行级锁

  ``` wiki
  1. 开锁大，最大程度支持并发处理
  2. 只在存储引擎层实现
  ```

  

- 

## 死锁

- 检测
  1. 死锁循环依赖
  2. 超时机制
- 解决
  1. InnoDB 最少行级排他锁回滚